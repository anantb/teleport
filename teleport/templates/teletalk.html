<!--
@author: Anant Bhardwaj

Teleport Web Page
-->
{% extends "layout.html" %}

{% block javascript %}
<script type="text/javascript">
    var apiKey = '{{api_key}}';
    var userId = '{{login_id}}';

    $(document).ready(function(){
        initTeletalk(apiKey, userId)

        $('#send').click(function() {
            var message = $('#field').val();
            sendMessage(message);
        });

        $("#invite").click(function() {
            var invitee = $('#invitee').val()
            inviteUser(invitee);
        });

        $('form').on('submit', function () {
            return false;
        });

        $('#field').bind('keypress',function (event){
          if (event.keyCode === 13){
            $('#send').trigger('click');
          }
        });

        if (!invited) {
            initiateChat();
        } else {
            joinChat(_session_id);
        }

    });

</script>
{% endblock %}


{% block links %}
<div class="links">
<a class="nav active" href="/contacts">Contacts</a>
<a class="nav" href="/feed">Feed</a>
<a class="nav" href="/teleport">Teleport</a>
</div>
{% endblock %}    

   
{% block main_content_header %}            
            
<table style="width:100%;">
<tr>
<td style="width:60%;">
    <input id='invitee' class="search-box" type="text" placeholder="Enter name or email address" style="width:100%;"/>
    
</td>
<td style="width:80px;">
    <a class="button" href="#" id="invite" style="margin-left:20px;">+ Invite</a>
</td>
<td style="width:120px;">
    <div class="mini-chat">
        <div id="my-chat-window"></div>
    </div>
</td>
</tr>
</table>
{% endblock %}

           
            
{% block main_content_body %}  
<div class="content-inner">
<table id="bottom-panel" style="width:100%;">
    <tr>                   
        
        <td style"width:60%;" class="border">
            
        <div id="chat-windows"></div>
            
        </td>
        <td style="width:80px;">
        </td>
        <td>
        </td>
    </tr>
    <tr>
        
        <td style"width:60%;" class="border">
        
        <div id="messages" style="height:400px; overflow:scroll;">
        
        </div>
        </td>
        <td style="width:80px;">
        </td>
        <td>
        </td>
    </tr>  
    <tr>
       
    <td style="width:60%; background-color:#eee; padding:20px;">
        <input type="text" style="width:100%; box-sizing:border-box;" id='field' />
        
    </td>
    <td style="width:80px;">
        <input id='send' type="submit" style="margin-left:20px;" value="Send" />
    </td>
    <td>
        </td>
    
    </tr>
</table>
</div>
{% endblock %}        
